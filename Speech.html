<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‹±èªèªéŸ³è¾¨è­˜è¨“ç·´</title>
    <style>
        body {
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100%;
            color: #333;
        }
        
        html {
            height: 100%;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #4a5568;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .subtitle {
            text-align: center;
            color: #718096;
            margin-bottom: 30px;
            font-size: 1.1rem;
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
        }
        
        /* é¦–é æ¨£å¼ */
        .home-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }
        
        .action-btn {
            background: #805ad5;
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(128, 90, 213, 0.3);
        }
        
        .action-btn:hover {
            background: #6b46c1;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(128, 90, 213, 0.4);
        }
        
        .action-btn.danger {
            background: #f56565;
            box-shadow: 0 4px 15px rgba(245, 101, 101, 0.3);
        }
        
        .action-btn.danger:hover {
            background: #e53e3e;
            box-shadow: 0 6px 20px rgba(245, 101, 101, 0.4);
        }
        
        .groups-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .group-card {
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
            border: 3px solid #e2e8f0;
            border-radius: 20px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .group-card:hover {
            border-color: #4299e1;
            background: linear-gradient(135deg, #ebf8ff 0%, #bee3f8 100%);
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(66, 153, 225, 0.2);
        }
        
        .group-title {
            font-size: 1.4rem;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 15px;
        }
        
        .group-patterns {
            font-size: 1.1rem;
            color: #4a5568;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .group-examples {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }
        
        .example-word {
            background: #4299e1;
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.9rem;
            font-weight: 600;
        }
        
        .group-stats {
            font-size: 0.9rem;
            color: #718096;
            font-style: italic;
        }
        
        /* ä½œç­”é é¢æ¨£å¼ */
        .quiz-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: #f7fafc;
            border-radius: 15px;
        }
        
        .quiz-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #4a5568;
            margin-bottom: 10px;
        }
        
        .quiz-patterns {
            font-size: 1.1rem;
            color: #718096;
        }
        
        .training-area {
            text-align: center;
            margin: 40px 0;
        }
        
        .current-word {
            font-size: 3rem;
            font-weight: bold;
            color: #2d3748;
            margin: 20px 0;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .current-word.hidden {
            color: transparent;
            user-select: none;
        }
        
        .current-word.hidden::before {
            content: "ğŸµ è½ç™¼éŸ³é¸ç­”æ¡ˆ";
            color: #718096;
            font-size: 1.5rem;
            font-style: italic;
        }
        
        .play-btn {
            background: #48bb78;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.2rem;
            cursor: pointer;
            margin: 20px auto;
            display: block;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(72, 187, 120, 0.3);
        }
        
        .play-btn:hover {
            background: #38a169;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(72, 187, 120, 0.4);
        }
        
        .options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 30px 0;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .option-btn {
            background: #f7fafc;
            border: 3px solid #e2e8f0;
            padding: 15px 10px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1.3rem;
            font-weight: 600;
            transition: all 0.3s ease;
            color: #4a5568;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }
        
        .option-sound-btn {
            background: #4299e1;
            color: white;
            border: none;
            padding: 6px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 60px;
        }
        
        .option-sound-btn:hover {
            background: #3182ce;
            transform: scale(1.05);
        }
        
        .option-btn:hover {
            border-color: #4299e1;
            background: #ebf8ff;
            transform: translateY(-2px);
        }
        
        .option-btn.correct {
            background: #c6f6d5;
            border-color: #48bb78;
            color: #22543d;
        }
        
        .option-btn.incorrect {
            background: #fed7d7;
            border-color: #f56565;
            color: #742a2a;
        }
        
        .feedback {
            margin: 20px 0;
            font-size: 1.2rem;
            font-weight: 600;
            min-height: 30px;
        }
        
        .feedback.correct {
            color: #48bb78;
        }
        
        .feedback.incorrect {
            color: #f56565;
        }
        
        .score {
            background: #edf2f7;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 1.1rem;
            font-weight: 600;
            color: #4a5568;
        }
        
        .quiz-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 30px;
        }
        
        .btn {
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: #4299e1;
            color: white;
        }
        
        .btn-primary:hover {
            background: #3182ce;
            transform: translateY(-2px);
        }
        
        .btn-primary:disabled {
            background: #a0aec0;
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-secondary {
            background: #e2e8f0;
            color: #4a5568;
        }
        
        .btn-secondary:hover {
            background: #cbd5e0;
            transform: translateY(-2px);
        }
        
        .btn-success {
            background: #48bb78;
            color: white;
        }
        
        .btn-success:hover {
            background: #38a169;
            transform: translateY(-2px);
        }
        
        /* å½ˆçª—æ¨£å¼ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            max-height: 80%;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .modal-title {
            margin: 0;
            color: #4a5568;
            font-size: 1.5rem;
        }
        
        .close-btn {
            background: #f56565;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            font-size: 1.2rem;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 20px;
                margin: 10px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .current-word {
                font-size: 2.5rem;
            }
            
            .options {
                grid-template-columns: 1fr 1fr;
            }
            
            .groups-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- é¦–é  -->
        <div id="homePage" class="page active">
            <h1>ğŸµ 11401-5Grade-WonderWorld è‹±èªèªéŸ³è¾¨è­˜è¨“ç·´</h1>
            <p class="subtitle">é¸æ“‡çµ„åˆ¥é–‹å§‹ç·´ç¿’ï¼Œè½ç™¼éŸ³é¸æ“‡æ­£ç¢ºçš„æ‹¼å¯«çµ„åˆ</p>
            
            <div class="home-actions">
                <button class="action-btn" id="homeRecordBtn">ğŸ“Š æŸ¥çœ‹è¨˜éŒ„</button>
                <button class="action-btn danger" id="homeClearBtn">ğŸ—‘ï¸ æ¸…é™¤è¨˜éŒ„</button>
            </div>
            
            <div class="groups-grid" id="groupsGrid">
                <!-- çµ„åˆ¥å¡ç‰‡å°‡ç”± JavaScript ç”Ÿæˆ -->
            </div>
        </div>
        
        <!-- ä½œç­”é é¢ -->
        <div id="quizPage" class="page">
            <div class="quiz-header">
                <div class="quiz-title" id="quizTitle">Group 1</div>
                <div class="quiz-patterns" id="quizPatterns">a_e, ai, ay</div>
            </div>
            
            <div class="training-area">
                <div class="score">
                    <span>é€²åº¦: <span id="progress">0/20</span></span> | 
                    <span>æ­£ç¢º: <span id="correct">0</span></span> | 
                    <span>æº–ç¢ºç‡: <span id="accuracy">0%</span></span>
                </div>
                
                <div class="current-word" id="currentWord">æº–å‚™é–‹å§‹è¨“ç·´</div>
                <button class="play-btn" id="playBtn">ğŸ”Š æ’­æ”¾ç™¼éŸ³</button>
                
                <div class="options" id="options"></div>
                
                <div class="feedback" id="feedback"></div>
                
                <div style="text-align: center;">
                    <button class="btn btn-primary" id="nextBtn" disabled>ä¸‹ä¸€é¡Œ (æˆ–æŒ‰ä¸‹ç©ºç™½éµ)</button>
                </div>
            </div>
            
            <div class="quiz-actions">
                <button class="btn btn-secondary" id="backHomeBtn">ğŸ  å›åˆ°é¦–é </button>
                <button class="btn btn-success" id="restartBtn">ğŸ”„ é‡æ–°é–‹å§‹</button>
            </div>
        </div>
        
        <!-- ç­”é¡Œè¨˜éŒ„å½ˆçª— -->
        <div id="recordModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title">ğŸ“Š ç­”é¡Œè¨˜éŒ„</h2>
                    <button id="closeModal" class="close-btn">âœ•</button>
                </div>
                <div id="recordContent"></div>
            </div>
        </div>
        
        <!-- æ¸…é™¤è¨˜éŒ„ç¢ºèªå½ˆçª— -->
        <div id="clearModal" class="modal">
            <div class="modal-content" style="max-width: 400px; text-align: center;">
                <h3 style="margin: 0 0 20px 0; color: #4a5568;">âš ï¸ ç¢ºèªæ¸…é™¤è¨˜éŒ„</h3>
                <p style="margin: 0 0 20px 0; color: #718096;">ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰ç­”é¡Œè¨˜éŒ„å—ï¼Ÿ<br>æ­¤æ“ä½œç„¡æ³•å¾©åŸï¼</p>
                <div style="display: flex; gap: 10px; justify-content: center;">
                    <button id="confirmClear" class="btn" style="background: #f56565; color: white;">ç¢ºå®šæ¸…é™¤</button>
                    <button id="cancelClear" class="btn btn-secondary">å–æ¶ˆ</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const phonicsGroups = [
            {
                name: "a_e, ai, ay",
                patterns: ["a_e", "ai", "ay"],
                words: [
                    {word: "cake", pattern: "a_e", phonetic: "keÉªk", chinese: "è›‹ç³•"},
                    {word: "rain", pattern: "ai", phonetic: "reÉªn", chinese: "é›¨"},
                    {word: "play", pattern: "ay", phonetic: "pleÉª", chinese: "ç©"},
                    {word: "make", pattern: "a_e", phonetic: "meÉªk", chinese: "è£½ä½œ"},
                    {word: "train", pattern: "ai", phonetic: "treÉªn", chinese: "ç«è»Š"},
                    {word: "day", pattern: "ay", phonetic: "deÉª", chinese: "å¤©"},
                    {word: "name", pattern: "a_e", phonetic: "neÉªm", chinese: "åå­—"},
                    {word: "mail", pattern: "ai", phonetic: "meÉªl", chinese: "éƒµä»¶"},
                    {word: "way", pattern: "ay", phonetic: "weÉª", chinese: "æ–¹æ³•"},
                    {word: "late", pattern: "a_e", phonetic: "leÉªt", chinese: "é²åˆ°"},
                    {word: "pain", pattern: "ai", phonetic: "peÉªn", chinese: "ç–¼ç—›"},
                    {word: "say", pattern: "ay", phonetic: "seÉª", chinese: "èªª"},
                    {word: "gate", pattern: "a_e", phonetic: "geÉªt", chinese: "é–€"},
                    {word: "wait", pattern: "ai", phonetic: "weÉªt", chinese: "ç­‰å¾…"},
                    {word: "may", pattern: "ay", phonetic: "meÉª", chinese: "å¯èƒ½"},
                    {word: "safe", pattern: "a_e", phonetic: "seÉªf", chinese: "å®‰å…¨"},
                    {word: "main", pattern: "ai", phonetic: "meÉªn", chinese: "ä¸»è¦"},
                    {word: "stay", pattern: "ay", phonetic: "steÉª", chinese: "åœç•™"},
                    {word: "face", pattern: "a_e", phonetic: "feÉªs", chinese: "è‡‰"},
                    {word: "tail", pattern: "ai", phonetic: "teÉªl", chinese: "å°¾å·´"}
                ]
            },
            {
                name: "e_e, ea, ee",
                patterns: ["e_e", "ea", "ee"],
                words: [
                    {word: "these", pattern: "e_e", phonetic: "Ã°iËz", chinese: "é€™äº›"},
                    {word: "read", pattern: "ea", phonetic: "riËd", chinese: "é–±è®€"},
                    {word: "tree", pattern: "ee", phonetic: "triË", chinese: "æ¨¹"},
                    {word: "scene", pattern: "e_e", phonetic: "siËn", chinese: "å ´æ™¯"},
                    {word: "meat", pattern: "ea", phonetic: "miËt", chinese: "è‚‰"},
                    {word: "free", pattern: "ee", phonetic: "friË", chinese: "è‡ªç”±"},
                    {word: "theme", pattern: "e_e", phonetic: "Î¸iËm", chinese: "ä¸»é¡Œ"},
                    {word: "team", pattern: "ea", phonetic: "tiËm", chinese: "åœ˜éšŠ"},
                    {word: "green", pattern: "ee", phonetic: "griËn", chinese: "ç¶ è‰²"},
                    {word: "complete", pattern: "e_e", phonetic: "kÉ™mËˆpliËt", chinese: "å®Œæˆ"},
                    {word: "sea", pattern: "ea", phonetic: "siË", chinese: "æµ·"},
                    {word: "see", pattern: "ee", phonetic: "siË", chinese: "çœ‹è¦‹"},
                    {word: "delete", pattern: "e_e", phonetic: "dÉªËˆliËt", chinese: "åˆªé™¤"},
                    {word: "beat", pattern: "ea", phonetic: "biËt", chinese: "æ‰“æ•—"},
                    {word: "bee", pattern: "ee", phonetic: "biË", chinese: "èœœèœ‚"},
                    {word: "extreme", pattern: "e_e", phonetic: "ÉªkËˆstriËm", chinese: "æ¥µç«¯"},
                    {word: "heat", pattern: "ea", phonetic: "hiËt", chinese: "ç†±"},
                    {word: "three", pattern: "ee", phonetic: "Î¸riË", chinese: "ä¸‰"},
                    {word: "compete", pattern: "e_e", phonetic: "kÉ™mËˆpiËt", chinese: "ç«¶çˆ­"},
                    {word: "seat", pattern: "ea", phonetic: "siËt", chinese: "åº§ä½"}
                ]
            },
            {
                name: "i_e, ie, igh",
                patterns: ["i_e", "ie", "igh"],
                words: [
                    {word: "bike", pattern: "i_e", phonetic: "baÉªk", chinese: "è…³è¸è»Š"},
                    {word: "pie", pattern: "ie", phonetic: "paÉª", chinese: "æ´¾"},
                    {word: "light", pattern: "igh", phonetic: "laÉªt", chinese: "å…‰"},
                    {word: "time", pattern: "i_e", phonetic: "taÉªm", chinese: "æ™‚é–“"},
                    {word: "tie", pattern: "ie", phonetic: "taÉª", chinese: "é ˜å¸¶"},
                    {word: "night", pattern: "igh", phonetic: "naÉªt", chinese: "å¤œæ™š"},
                    {word: "nine", pattern: "i_e", phonetic: "naÉªn", chinese: "ä¹"},
                    {word: "lie", pattern: "ie", phonetic: "laÉª", chinese: "èªªè¬Š"},
                    {word: "right", pattern: "igh", phonetic: "raÉªt", chinese: "å³é‚Š"},
                    {word: "fine", pattern: "i_e", phonetic: "faÉªn", chinese: "å¥½çš„"},
                    {word: "die", pattern: "ie", phonetic: "daÉª", chinese: "æ­»äº¡"},
                    {word: "sight", pattern: "igh", phonetic: "saÉªt", chinese: "è¦–åŠ›"},
                    {word: "line", pattern: "i_e", phonetic: "laÉªn", chinese: "ç·š"},
                    {word: "cry", pattern: "ie", phonetic: "kraÉª", chinese: "å“­æ³£"},
                    {word: "bright", pattern: "igh", phonetic: "braÉªt", chinese: "æ˜äº®"},
                    {word: "mine", pattern: "i_e", phonetic: "maÉªn", chinese: "æˆ‘çš„"},
                    {word: "fly", pattern: "ie", phonetic: "flaÉª", chinese: "é£›"},
                    {word: "fight", pattern: "igh", phonetic: "faÉªt", chinese: "æˆ°é¬¥"},
                    {word: "side", pattern: "i_e", phonetic: "saÉªd", chinese: "é‚Š"},
                    {word: "high", pattern: "igh", phonetic: "haÉª", chinese: "é«˜"}
                ]
            },
            {
                name: "o_e, oa, ow",
                patterns: ["o_e", "oa", "ow"],
                words: [
                    {word: "home", pattern: "o_e", phonetic: "hoÊŠm", chinese: "å®¶"},
                    {word: "boat", pattern: "oa", phonetic: "boÊŠt", chinese: "èˆ¹"},
                    {word: "show", pattern: "ow", phonetic: "ÊƒoÊŠ", chinese: "è¡¨æ¼”"},
                    {word: "note", pattern: "o_e", phonetic: "noÊŠt", chinese: "ç­†è¨˜"},
                    {word: "coat", pattern: "oa", phonetic: "koÊŠt", chinese: "å¤–å¥—"},
                    {word: "grow", pattern: "ow", phonetic: "groÊŠ", chinese: "æˆé•·"},
                    {word: "hope", pattern: "o_e", phonetic: "hoÊŠp", chinese: "å¸Œæœ›"},
                    {word: "road", pattern: "oa", phonetic: "roÊŠd", chinese: "é“è·¯"},
                    {word: "know", pattern: "ow", phonetic: "noÊŠ", chinese: "çŸ¥é“"},
                    {word: "bone", pattern: "o_e", phonetic: "boÊŠn", chinese: "éª¨é ­"},
                    {word: "soap", pattern: "oa", phonetic: "soÊŠp", chinese: "è‚¥çš‚"},
                    {word: "slow", pattern: "ow", phonetic: "sloÊŠ", chinese: "æ…¢"},
                    {word: "phone", pattern: "o_e", phonetic: "foÊŠn", chinese: "é›»è©±"},
                    {word: "goal", pattern: "oa", phonetic: "goÊŠl", chinese: "ç›®æ¨™"},
                    {word: "flow", pattern: "ow", phonetic: "floÊŠ", chinese: "æµå‹•"},
                    {word: "stone", pattern: "o_e", phonetic: "stoÊŠn", chinese: "çŸ³é ­"},
                    {word: "load", pattern: "oa", phonetic: "loÊŠd", chinese: "è² è¼‰"},
                    {word: "blow", pattern: "ow", phonetic: "bloÊŠ", chinese: "å¹"},
                    {word: "close", pattern: "o_e", phonetic: "kloÊŠs", chinese: "é—œé–‰"},
                    {word: "toast", pattern: "oa", phonetic: "toÊŠst", chinese: "åå¸"}
                ]
            },
            {
                name: "u_e, ue, ui",
                patterns: ["u_e", "ue", "ui"],
                words: [
                    {word: "cute", pattern: "u_e", phonetic: "kjuËt", chinese: "å¯æ„›"},
                    {word: "blue", pattern: "ue", phonetic: "bluË", chinese: "è—è‰²"},
                    {word: "fruit", pattern: "ui", phonetic: "fruËt", chinese: "æ°´æœ"},
                    {word: "tube", pattern: "u_e", phonetic: "tuËb", chinese: "ç®¡å­"},
                    {word: "true", pattern: "ue", phonetic: "truË", chinese: "çœŸå¯¦"},
                    {word: "suit", pattern: "ui", phonetic: "suËt", chinese: "è¥¿è£"},
                    {word: "huge", pattern: "u_e", phonetic: "hjuËdÊ’", chinese: "å·¨å¤§"},
                    {word: "glue", pattern: "ue", phonetic: "gluË", chinese: "è† æ°´"},
                    {word: "juice", pattern: "ui", phonetic: "dÊ’uËs", chinese: "æœæ±"},
                    {word: "use", pattern: "u_e", phonetic: "juËz", chinese: "ä½¿ç”¨"},
                    {word: "due", pattern: "ue", phonetic: "duË", chinese: "åˆ°æœŸ"},
                    {word: "cruise", pattern: "ui", phonetic: "kruËz", chinese: "å·¡èˆª"},
                    {word: "mute", pattern: "u_e", phonetic: "mjuËt", chinese: "éœéŸ³"},
                    {word: "clue", pattern: "ue", phonetic: "kluË", chinese: "ç·šç´¢"},
                    {word: "bruise", pattern: "ui", phonetic: "bruËz", chinese: "ç˜€å‚·"},
                    {word: "pure", pattern: "u_e", phonetic: "pjÊŠr", chinese: "ç´”æ·¨"},
                    {word: "value", pattern: "ue", phonetic: "vÃ¦ljuË", chinese: "åƒ¹å€¼"},
                    {word: "ruin", pattern: "ui", phonetic: "ruËÉªn", chinese: "æ¯€å£"},
                    {word: "cure", pattern: "u_e", phonetic: "kjÊŠr", chinese: "æ²»ç™’"},
                    {word: "rescue", pattern: "ue", phonetic: "reskjuË", chinese: "æ•‘æ´"}
                ]
            }
        ];

        let currentGroup = 0;
        let currentWord = null;
        let correctCount = 0;
        let totalCount = 0;
        let answered = false;
        let groupStats = {};
        let sessionStartTime = new Date();
        let usedWords = [];
        const MAX_QUESTIONS = 20;

        // DOM å…ƒç´ 
        const homePage = document.getElementById('homePage');
        const quizPage = document.getElementById('quizPage');
        const groupsGrid = document.getElementById('groupsGrid');
        const quizTitle = document.getElementById('quizTitle');
        const quizPatterns = document.getElementById('quizPatterns');
        const currentWordEl = document.getElementById('currentWord');
        const playBtn = document.getElementById('playBtn');
        const optionsEl = document.getElementById('options');
        const feedbackEl = document.getElementById('feedback');
        const nextBtn = document.getElementById('nextBtn');
        const correctEl = document.getElementById('correct');
        const accuracyEl = document.getElementById('accuracy');
        const progressEl = document.getElementById('progress');
        const backHomeBtn = document.getElementById('backHomeBtn');
        const restartBtn = document.getElementById('restartBtn');
        const homeRecordBtn = document.getElementById('homeRecordBtn');
        const homeClearBtn = document.getElementById('homeClearBtn');
        const recordModal = document.getElementById('recordModal');
        const closeModal = document.getElementById('closeModal');
        const recordContent = document.getElementById('recordContent');
        const clearModal = document.getElementById('clearModal');
        const confirmClear = document.getElementById('confirmClear');
        const cancelClear = document.getElementById('cancelClear');

        // åˆå§‹åŒ–
        function init() {
            createGroupCards();
            setupEventListeners();
        }

        function createGroupCards() {
            groupsGrid.innerHTML = '';
            phonicsGroups.forEach((group, index) => {
                const card = document.createElement('div');
                card.className = 'group-card';
                card.addEventListener('click', () => startQuiz(index));
                
                const stats = getGroupStats(index);
                const statsText = stats.total > 0 ? 
                    `å·²ç·´ç¿’ ${stats.total} é¡Œï¼Œæº–ç¢ºç‡ ${stats.accuracy}%` : 
                    'å°šæœªç·´ç¿’';
                
                card.innerHTML = `
                    <div class="group-title">Group ${index + 1}</div>
                    <div class="group-patterns">${group.name}</div>
                    <div class="group-examples">
                        ${group.patterns.map(pattern => {
                            const example = group.words.find(w => w.pattern === pattern);
                            return `<span class="example-word">${example.word}</span>`;
                        }).join('')}
                    </div>
                    <div class="group-stats">${statsText}</div>
                `;
                
                groupsGrid.appendChild(card);
            });
        }

        function getGroupStats(groupIndex) {
            const group = groupStats[groupIndex];
            if (!group || group.sessions.length === 0) {
                return { total: 0, correct: 0, accuracy: 0 };
            }
            
            const total = group.sessions.reduce((sum, s) => sum + s.total, 0);
            const correct = group.sessions.reduce((sum, s) => sum + s.correct, 0);
            const accuracy = total > 0 ? Math.round((correct / total) * 100) : 0;
            
            return { total, correct, accuracy };
        }

        function setupEventListeners() {
            playBtn.addEventListener('click', playSound);
            nextBtn.addEventListener('click', nextQuestion);
            backHomeBtn.addEventListener('click', goHome);
            restartBtn.addEventListener('click', restartQuiz);
            homeRecordBtn.addEventListener('click', showRecord);
            homeClearBtn.addEventListener('click', showClearConfirm);
            closeModal.addEventListener('click', hideRecord);
            recordModal.addEventListener('click', (e) => {
                if (e.target === recordModal) hideRecord();
            });
            confirmClear.addEventListener('click', clearAllRecords);
            cancelClear.addEventListener('click', hideClearConfirm);
            clearModal.addEventListener('click', (e) => {
                if (e.target === clearModal) hideClearConfirm();
            });

            // éµç›¤äº‹ä»¶
            document.addEventListener('keydown', (e) => {
                if (e.code === 'Space' && !nextBtn.disabled && quizPage.classList.contains('active')) {
                    e.preventDefault();
                    nextQuestion();
                }
            });
        }

        function startQuiz(groupIndex) {
            // å„²å­˜ç•¶å‰çµ„åˆ¥çš„çµ±è¨ˆè³‡æ–™
            if (totalCount > 0) {
                saveGroupStats();
            }
            
            currentGroup = groupIndex;
            const group = phonicsGroups[groupIndex];
            
            // æ›´æ–°ä½œç­”é é¢æ¨™é¡Œ
            quizTitle.textContent = `Group ${groupIndex + 1}`;
            quizPatterns.textContent = group.name;
            
            // é‡ç½®çµ±è¨ˆå’Œå·²ç”¨å–®å­—
            correctCount = 0;
            totalCount = 0;
            usedWords = [];
            sessionStartTime = new Date();
            updateScore();
            
            // åˆ‡æ›åˆ°ä½œç­”é é¢
            showPage('quiz');
            nextQuestion();
        }

        function showPage(page) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            if (page === 'home') {
                homePage.classList.add('active');
                createGroupCards(); // æ›´æ–°çµ±è¨ˆè³‡æ–™
            } else if (page === 'quiz') {
                quizPage.classList.add('active');
            }
        }

        function goHome() {
            // å„²å­˜ç•¶å‰çµ„åˆ¥çš„çµ±è¨ˆè³‡æ–™
            if (totalCount > 0 && totalCount < MAX_QUESTIONS) {
                saveGroupStats();
            }
            
            // é‡ç½®é¡¯ç¤ºå…ƒç´ 
            playBtn.style.display = 'block';
            optionsEl.style.display = 'grid';
            nextBtn.style.display = 'block';
            
            showPage('home');
        }

        function restartQuiz() {
            // å„²å­˜ç•¶å‰çµ„åˆ¥çš„çµ±è¨ˆè³‡æ–™
            if (totalCount > 0 && totalCount >= MAX_QUESTIONS) {
                // å¦‚æœæ˜¯å®Œæˆæ¸¬é©—å¾Œé‡æ–°é–‹å§‹ï¼Œä¸éœ€è¦å†æ¬¡å„²å­˜
            } else if (totalCount > 0) {
                saveGroupStats();
            }
            
            // é‡ç½®çµ±è¨ˆå’Œå·²ç”¨å–®å­—
            correctCount = 0;
            totalCount = 0;
            usedWords = [];
            sessionStartTime = new Date();
            updateScore();
            
            // é‡ç½®é¡¯ç¤ºå…ƒç´ 
            playBtn.style.display = 'block';
            optionsEl.style.display = 'grid';
            nextBtn.style.display = 'block';
            
            nextQuestion();
        }

        function saveGroupStats() {
            if (!groupStats[currentGroup]) {
                groupStats[currentGroup] = {
                    groupName: phonicsGroups[currentGroup].name,
                    sessions: []
                };
            }
            
            if (totalCount > 0) {
                const accuracy = Math.round((correctCount / totalCount) * 100);
                const endTime = new Date();
                const duration = Math.round((endTime - sessionStartTime) / 1000);
                
                groupStats[currentGroup].sessions.push({
                    correct: correctCount,
                    total: totalCount,
                    accuracy: accuracy,
                    startTime: sessionStartTime,
                    endTime: endTime,
                    duration: duration
                });
            }
        }

        function getRandomWord() {
            const words = phonicsGroups[currentGroup].words;
            const availableWords = words.filter(word => !usedWords.includes(word.word));
            
            // å¦‚æœæ‰€æœ‰å–®å­—éƒ½ç”¨éäº†ï¼Œé‡ç½®å·²ç”¨å–®å­—åˆ—è¡¨
            if (availableWords.length === 0) {
                usedWords = [];
                return words[Math.floor(Math.random() * words.length)];
            }
            
            const selectedWord = availableWords[Math.floor(Math.random() * availableWords.length)];
            usedWords.push(selectedWord.word);
            return selectedWord;
        }

        function nextQuestion() {
            // æª¢æŸ¥æ˜¯å¦å·²é”åˆ°20é¡Œ
            if (totalCount >= MAX_QUESTIONS) {
                showQuizComplete();
                return;
            }
            
            currentWord = getRandomWord();
            currentWordEl.textContent = currentWord.word;
            currentWordEl.classList.add('hidden');
            answered = false;
            nextBtn.disabled = true;
            feedbackEl.textContent = '';
            feedbackEl.className = 'feedback';
            
            createOptions();
        }

        function createOptions() {
            const patterns = phonicsGroups[currentGroup].patterns;
            optionsEl.innerHTML = '';
            
            patterns.forEach(pattern => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                
                const patternText = document.createElement('div');
                patternText.textContent = pattern;
                patternText.style.fontSize = '1.3rem';
                patternText.style.fontWeight = '600';
                
                const currentGroupWords = phonicsGroups[currentGroup].words;
                const exampleWord = currentGroupWords.find(word => word.pattern === pattern);
                const exampleText = document.createElement('div');
                exampleText.textContent = `ex: ${exampleWord.word}`;
                exampleText.style.fontSize = '0.9rem';
                exampleText.style.color = '#718096';
                exampleText.style.fontStyle = 'italic';
                exampleText.style.marginTop = '4px';
                
                const soundBtn = document.createElement('button');
                soundBtn.className = 'option-sound-btn';
                soundBtn.textContent = 'ğŸ”Š è½éŸ³';
                soundBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    playPatternSound(pattern);
                });
                
                btn.appendChild(patternText);
                btn.appendChild(exampleText);
                btn.appendChild(soundBtn);
                btn.addEventListener('click', () => selectOption(pattern, btn));
                optionsEl.appendChild(btn);
            });
        }

        function selectOption(selectedPattern, btnElement) {
            if (answered) return;
            
            answered = true;
            totalCount++;
            
            const isCorrect = selectedPattern === currentWord.pattern;
            
            document.querySelectorAll('.option-btn').forEach(btn => {
                btn.classList.remove('correct', 'incorrect');
            });
            
            currentWordEl.classList.remove('hidden');
            currentWordEl.innerHTML = `${currentWord.word} <span style="font-size: 1.5rem; color: #718096; margin-left: 15px;">(${currentWord.chinese})</span>`;
            
            if (isCorrect) {
                correctCount++;
                btnElement.classList.add('correct');
                feedbackEl.textContent = 'ğŸ‰ æ­£ç¢ºï¼å¾ˆæ£’ï¼';
                feedbackEl.className = 'feedback correct';
            } else {
                btnElement.classList.add('incorrect');
                document.querySelectorAll('.option-btn').forEach(btn => {
                    if (btn.textContent === currentWord.pattern) {
                        btn.classList.add('correct');
                    }
                });
                feedbackEl.textContent = `âŒ ä¸å°å–”ï¼æ­£ç¢ºç­”æ¡ˆæ˜¯ "${currentWord.pattern}"`;
                feedbackEl.className = 'feedback incorrect';
            }
            
            updateScore();
            nextBtn.disabled = false;
        }

        function updateScore() {
            correctEl.textContent = correctCount;
            progressEl.textContent = `${totalCount}/${MAX_QUESTIONS}`;
            const accuracy = totalCount > 0 ? Math.round((correctCount / totalCount) * 100) : 0;
            accuracyEl.textContent = accuracy + '%';
        }

        function showQuizComplete() {
            // è‡ªå‹•å„²å­˜çµ±è¨ˆè³‡æ–™
            saveGroupStats();
            
            const accuracy = Math.round((correctCount / totalCount) * 100);
            let message = '';
            let emoji = '';
            
            if (accuracy >= 90) {
                message = 'å¤ªæ£’äº†ï¼ä½ æ˜¯ç™¼éŸ³é«˜æ‰‹ï¼';
                emoji = 'ğŸ†';
            } else if (accuracy >= 80) {
                message = 'å¾ˆå¥½ï¼ç¹¼çºŒä¿æŒï¼';
                emoji = 'ğŸ‰';
            } else if (accuracy >= 70) {
                message = 'ä¸éŒ¯ï¼é‚„æœ‰é€²æ­¥ç©ºé–“ï¼';
                emoji = 'ğŸ‘';
            } else {
                message = 'åŠ æ²¹ï¼å¤šç·´ç¿’æœƒæ›´å¥½ï¼';
                emoji = 'ğŸ’ª';
            }
            
            currentWordEl.innerHTML = `
                <div style="font-size: 2rem; margin-bottom: 20px;">${emoji}</div>
                <div style="font-size: 1.5rem; color: #4a5568; margin-bottom: 10px;">æ¸¬é©—å®Œæˆï¼</div>
                <div style="font-size: 1.2rem; color: #718096;">${message}</div>
            `;
            currentWordEl.classList.remove('hidden');
            
            feedbackEl.innerHTML = `
                <div style="font-size: 1.1rem; color: #4a5568;">
                    æœ€çµ‚æˆç¸¾ï¼š${correctCount}/${totalCount} é¡Œæ­£ç¢º (${accuracy}%)
                </div>
            `;
            feedbackEl.className = 'feedback';
            
            // éš±è—æ’­æ”¾æŒ‰éˆ•å’Œé¸é …
            playBtn.style.display = 'none';
            optionsEl.style.display = 'none';
            nextBtn.style.display = 'none';
            
            // æ›´æ–°é¦–é çš„çµ±è¨ˆè³‡æ–™
            createGroupCards();
        }

        function playSound() {
            if (!currentWord) return;
            
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(currentWord.word);
                utterance.lang = 'en-US';
                utterance.rate = 0.8;
                utterance.pitch = 1;
                speechSynthesis.speak(utterance);
            } else {
                feedbackEl.textContent = 'æŠ±æ­‰ï¼Œæ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´èªéŸ³æ’­æ”¾åŠŸèƒ½';
                feedbackEl.className = 'feedback incorrect';
            }
        }
        
        function playPatternSound(pattern) {
            const currentGroupWords = phonicsGroups[currentGroup].words;
            const exampleWord = currentGroupWords.find(word => word.pattern === pattern);
            
            if (exampleWord && 'speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(exampleWord.word);
                utterance.lang = 'en-US';
                utterance.rate = 0.7;
                utterance.pitch = 1;
                speechSynthesis.speak(utterance);
            } else if (!('speechSynthesis' in window)) {
                feedbackEl.textContent = 'æŠ±æ­‰ï¼Œæ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´èªéŸ³æ’­æ”¾åŠŸèƒ½';
                feedbackEl.className = 'feedback incorrect';
            }
        }

        function showRecord() {
            // å…ˆå„²å­˜ç•¶å‰çµ„åˆ¥çš„è³‡æ–™
            if (totalCount > 0 && quizPage.classList.contains('active')) {
                saveGroupStats();
            }
            
            let html = '<div style="margin-bottom: 20px; padding: 15px; background: #f7fafc; border-radius: 10px;">';
            html += '<h3 style="margin: 0 0 10px 0; color: #4a5568;">ğŸ“ˆ ç¸½é«”çµ±è¨ˆ</h3>';
            
            let totalSessions = 0;
            let totalQuestions = 0;
            let totalCorrect = 0;
            
            Object.values(groupStats).forEach(group => {
                totalSessions += group.sessions.length;
                group.sessions.forEach(session => {
                    totalQuestions += session.total;
                    totalCorrect += session.correct;
                });
            });
            
            const overallAccuracy = totalQuestions > 0 ? Math.round((totalCorrect / totalQuestions) * 100) : 0;
            html += `<p style="margin: 5px 0;">ç¸½ç·´ç¿’æ¬¡æ•¸: ${totalSessions} æ¬¡</p>`;
            html += `<p style="margin: 5px 0;">ç¸½é¡Œæ•¸: ${totalQuestions} é¡Œ</p>`;
            html += `<p style="margin: 5px 0;">ç¸½é«”æº–ç¢ºç‡: ${overallAccuracy}%</p>`;
            html += '</div>';
            
            for (let groupIndex = 0; groupIndex < phonicsGroups.length; groupIndex++) {
                const group = groupStats[groupIndex];
                html += `<div style="margin-bottom: 20px; padding: 15px; border: 2px solid #e2e8f0; border-radius: 10px;">`;
                html += `<h3 style="margin: 0 0 15px 0; color: #4a5568;">Group ${groupIndex + 1}: ${phonicsGroups[groupIndex].name}</h3>`;
                
                if (!group || group.sessions.length === 0) {
                    html += '<p style="color: #718096; font-style: italic;">å°šæœªç·´ç¿’æ­¤çµ„åˆ¥</p>';
                } else {
                    group.sessions.forEach((session, index) => {
                        const startTime = session.startTime.toLocaleString('zh-TW');
                        const minutes = Math.floor(session.duration / 60);
                        const seconds = session.duration % 60;
                        const durationText = minutes > 0 ? `${minutes}åˆ†${seconds}ç§’` : `${seconds}ç§’`;
                        
                        html += `<div style="margin-bottom: 10px; padding: 10px; background: ${session.accuracy >= 80 ? '#c6f6d5' : session.accuracy >= 60 ? '#fef5e7' : '#fed7d7'}; border-radius: 8px;">`;
                        html += `<div style="font-weight: 600;">ç¬¬ ${index + 1} æ¬¡ç·´ç¿’</div>`;
                        html += `<div style="font-size: 0.9rem; color: #4a5568;">`;
                        html += `æ™‚é–“: ${startTime}<br>`;
                        html += `ç­”å°: ${session.correct}/${session.total} é¡Œ (${session.accuracy}%)<br>`;
                        html += `ç”¨æ™‚: ${durationText}`;
                        html += `</div></div>`;
                    });
                    
                    const groupTotal = group.sessions.reduce((sum, s) => sum + s.total, 0);
                    const groupCorrect = group.sessions.reduce((sum, s) => sum + s.correct, 0);
                    const groupAccuracy = groupTotal > 0 ? Math.round((groupCorrect / groupTotal) * 100) : 0;
                    
                    html += `<div style="margin-top: 10px; padding: 10px; background: #edf2f7; border-radius: 8px; font-weight: 600;">`;
                    html += `æœ¬çµ„ç¸½è¨ˆ: ${group.sessions.length} æ¬¡ç·´ç¿’ï¼Œ${groupCorrect}/${groupTotal} é¡Œæ­£ç¢º (${groupAccuracy}%)`;
                    html += `</div>`;
                }
                
                html += '</div>';
            }
            
            recordContent.innerHTML = html;
            recordModal.style.display = 'flex';
        }
        
        function hideRecord() {
            recordModal.style.display = 'none';
        }
        
        function showClearConfirm() {
            clearModal.style.display = 'flex';
        }
        
        function hideClearConfirm() {
            clearModal.style.display = 'none';
        }
        
        function clearAllRecords() {
            groupStats = {};
            
            if (quizPage.classList.contains('active')) {
                correctCount = 0;
                totalCount = 0;
                sessionStartTime = new Date();
                updateScore();
            }
            
            hideClearConfirm();
            
            if (homePage.classList.contains('active')) {
                createGroupCards();
            }
            
            feedbackEl.textContent = 'âœ… æ‰€æœ‰ç­”é¡Œè¨˜éŒ„å·²æ¸…é™¤ï¼';
            feedbackEl.className = 'feedback correct';
            
            setTimeout(() => {
                feedbackEl.textContent = '';
                feedbackEl.className = 'feedback';
            }, 3000);
        }

        // å•Ÿå‹•æ‡‰ç”¨ç¨‹å¼
        init();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'992e4e71b613074c',t:'MTc2MTE5MTgwNi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
