<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ëã±Ë™ûË™ûÈü≥Ëæ®Ë≠òË®ìÁ∑¥</title>
    <style>
        body {
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100%;
            color: #333;
        }
        
        html {
            height: 100%;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #4a5568;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .subtitle {
            text-align: center;
            color: #718096;
            margin-bottom: 30px;
            font-size: 1.1rem;
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
        }
        
        /* È¶ñÈ†ÅÊ®£Âºè */
        .home-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }
        
        .action-btn {
            background: #805ad5;
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(128, 90, 213, 0.3);
        }
        
        .action-btn:hover {
            background: #6b46c1;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(128, 90, 213, 0.4);
        }
        
        .action-btn.danger {
            background: #f56565;
            box-shadow: 0 4px 15px rgba(245, 101, 101, 0.3);
        }
        
        .action-btn.danger:hover {
            background: #e53e3e;
            box-shadow: 0 6px 20px rgba(245, 101, 101, 0.4);
        }
        
        .groups-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .group-card {
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
            border: 3px solid #e2e8f0;
            border-radius: 20px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .group-card:hover {
            border-color: #4299e1;
            background: linear-gradient(135deg, #ebf8ff 0%, #bee3f8 100%);
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(66, 153, 225, 0.2);
        }
        
        .group-title {
            font-size: 1.4rem;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 15px;
        }
        
        .group-patterns {
            font-size: 1.1rem;
            color: #4a5568;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .group-examples {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }
        
        .example-word {
            background: #4299e1;
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.9rem;
            font-weight: 600;
        }
        
        .group-stats {
            font-size: 0.9rem;
            color: #718096;
            font-style: italic;
        }
        
        /* ‰ΩúÁ≠îÈ†ÅÈù¢Ê®£Âºè */
        .quiz-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: #f7fafc;
            border-radius: 15px;
        }
        
        .quiz-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #4a5568;
            margin-bottom: 10px;
        }
        
        .quiz-patterns {
            font-size: 1.1rem;
            color: #718096;
        }
        
        .training-area {
            text-align: center;
            margin: 40px 0;
        }
        
        .current-word {
            font-size: 3rem;
            font-weight: bold;
            color: #2d3748;
            margin: 20px 0;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .current-word.hidden {
            color: transparent;
            user-select: none;
        }
        
        .current-word.hidden::before {
            content: "üéµ ËÅΩÁôºÈü≥ÈÅ∏Á≠îÊ°à";
            color: #718096;
            font-size: 1.5rem;
            font-style: italic;
        }
        
        .play-btn {
            background: #48bb78;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.2rem;
            cursor: pointer;
            margin: 20px auto;
            display: block;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(72, 187, 120, 0.3);
        }
        
        .play-btn:hover {
            background: #38a169;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(72, 187, 120, 0.4);
        }
        
        .options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 30px 0;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .option-btn {
            background: #f7fafc;
            border: 3px solid #e2e8f0;
            padding: 15px 10px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1.3rem;
            font-weight: 600;
            transition: all 0.3s ease;
            color: #4a5568;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }
        
        .option-sound-btn {
            background: #4299e1;
            color: white;
            border: none;
            padding: 6px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 60px;
        }
        
        .option-sound-btn:hover {
            background: #3182ce;
            transform: scale(1.05);
        }
        
        .option-btn:hover {
            border-color: #4299e1;
            background: #ebf8ff;
            transform: translateY(-2px);
        }
        
        .option-btn.correct {
            background: #c6f6d5;
            border-color: #48bb78;
            color: #22543d;
        }
        
        .option-btn.incorrect {
            background: #fed7d7;
            border-color: #f56565;
            color: #742a2a;
        }
        
        .feedback {
            margin: 20px 0;
            font-size: 1.2rem;
            font-weight: 600;
            min-height: 30px;
        }
        
        .feedback.correct {
            color: #48bb78;
        }
        
        .feedback.incorrect {
            color: #f56565;
        }
        
        .score {
            background: #edf2f7;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 1.1rem;
            font-weight: 600;
            color: #4a5568;
        }
        
        .quiz-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 30px;
        }
        
        .btn {
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: #4299e1;
            color: white;
        }
        
        .btn-primary:hover {
            background: #3182ce;
            transform: translateY(-2px);
        }
        
        .btn-primary:disabled {
            background: #a0aec0;
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-secondary {
            background: #e2e8f0;
            color: #4a5568;
        }
        
        .btn-secondary:hover {
            background: #cbd5e0;
            transform: translateY(-2px);
        }
        
        .btn-success {
            background: #48bb78;
            color: white;
        }
        
        .btn-success:hover {
            background: #38a169;
            transform: translateY(-2px);
        }
        
        /* ÂΩàÁ™óÊ®£Âºè */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            max-height: 80%;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .modal-title {
            margin: 0;
            color: #4a5568;
            font-size: 1.5rem;
        }
        
        .close-btn {
            background: #f56565;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            font-size: 1.2rem;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 20px;
                margin: 10px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .current-word {
                font-size: 2.5rem;
            }
            
            .options {
                grid-template-columns: 1fr 1fr;
            }
            
            .groups-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- È¶ñÈ†Å -->
        <div id="homePage" class="page active">
            <h1>üéµ 11401-5Grade-WonderWorld Ëã±Ë™ûË™ûÈü≥Ëæ®Ë≠òË®ìÁ∑¥</h1>
            <p class="subtitle">ÈÅ∏ÊìáÁµÑÂà•ÈñãÂßãÁ∑¥ÁøíÔºåËÅΩÁôºÈü≥ÈÅ∏ÊìáÊ≠£Á¢∫ÁöÑÊãºÂØ´ÁµÑÂêà</p>
            
            <div class="home-actions">
                <button class="action-btn" id="homeRecordBtn">üìä Êü•ÁúãË®òÈåÑ</button>
                <button class="action-btn danger" id="homeClearBtn">üóëÔ∏è Ê∏ÖÈô§Ë®òÈåÑ</button>
            </div>
            
            <div class="groups-grid" id="groupsGrid">
                <!-- ÁµÑÂà•Âç°ÁâáÂ∞áÁî± JavaScript ÁîüÊàê -->
            </div>
        </div>
        
        <!-- ‰ΩúÁ≠îÈ†ÅÈù¢ -->
        <div id="quizPage" class="page">
            <div class="quiz-header">
                <div class="quiz-title" id="quizTitle">Group 1</div>
                <div class="quiz-patterns" id="quizPatterns">a_e, ai, ay</div>
            </div>
            
            <div class="training-area">
                <div class="score">
                    <span>ÈÄ≤Â∫¶: <span id="progress">0/20</span></span> | 
                    <span>Ê≠£Á¢∫: <span id="correct">0</span></span> | 
                    <span>Ê∫ñÁ¢∫Áéá: <span id="accuracy">0%</span></span>
                </div>
                
                <div class="current-word" id="currentWord">Ê∫ñÂÇôÈñãÂßãË®ìÁ∑¥</div>
                <button class="play-btn" id="playBtn">üîä Êí≠ÊîæÁôºÈü≥</button>
                
                <div class="options" id="options"></div>
                
                <div class="feedback" id="feedback"></div>
                
                <div style="text-align: center;">
                    <button class="btn btn-primary" id="nextBtn" disabled>‰∏ã‰∏ÄÈ°å (ÊàñÊåâ‰∏ãÁ©∫ÁôΩÈçµ)</button>
                </div>
            </div>
            
            <div class="quiz-actions">
                <button class="btn btn-secondary" id="backHomeBtn">üè† ÂõûÂà∞È¶ñÈ†Å</button>
                <button class="btn btn-success" id="restartBtn">üîÑ ÈáçÊñ∞ÈñãÂßã</button>
            </div>
        </div>
        
        <!-- Á≠îÈ°åË®òÈåÑÂΩàÁ™ó -->
        <div id="recordModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title">üìä Á≠îÈ°åË®òÈåÑ</h2>
                    <button id="closeModal" class="close-btn">‚úï</button>
                </div>
                <div id="recordContent"></div>
            </div>
        </div>
        
        <!-- Ê∏ÖÈô§Ë®òÈåÑÁ¢∫Ë™çÂΩàÁ™ó -->
        <div id="clearModal" class="modal">
            <div class="modal-content" style="max-width: 400px; text-align: center;">
                <h3 style="margin: 0 0 20px 0; color: #4a5568;">‚ö†Ô∏è Á¢∫Ë™çÊ∏ÖÈô§Ë®òÈåÑ</h3>
                <p style="margin: 0 0 20px 0; color: #718096;">Á¢∫ÂÆöË¶ÅÊ∏ÖÈô§ÊâÄÊúâÁ≠îÈ°åË®òÈåÑÂóéÔºü<br>Ê≠§Êìç‰ΩúÁÑ°Ê≥ïÂæ©ÂéüÔºÅ</p>
                <div style="display: flex; gap: 10px; justify-content: center;">
                    <button id="confirmClear" class="btn" style="background: #f56565; color: white;">Á¢∫ÂÆöÊ∏ÖÈô§</button>
                    <button id="cancelClear" class="btn btn-secondary">ÂèñÊ∂à</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const phonicsGroups = [
            {
                name: "a_e, ai, ay",
                patterns: ["a_e", "ai", "ay"],
                words: [
                    {word: "cake", pattern: "a_e", phonetic: "ke…™k", chinese: "ËõãÁ≥ï"},
                    {word: "rain", pattern: "ai", phonetic: "re…™n", chinese: "Èõ®"},
                    {word: "play", pattern: "ay", phonetic: "ple…™", chinese: "Áé©"},
                    {word: "make", pattern: "a_e", phonetic: "me…™k", chinese: "Ë£Ω‰Ωú"},
                    {word: "train", pattern: "ai", phonetic: "tre…™n", chinese: "ÁÅ´Ëªä"},
                    {word: "day", pattern: "ay", phonetic: "de…™", chinese: "Â§©"},
                    {word: "name", pattern: "a_e", phonetic: "ne…™m", chinese: "ÂêçÂ≠ó"},
                    {word: "mail", pattern: "ai", phonetic: "me…™l", chinese: "ÈÉµ‰ª∂"},
                    {word: "way", pattern: "ay", phonetic: "we…™", chinese: "ÊñπÊ≥ï"},
                    {word: "late", pattern: "a_e", phonetic: "le…™t", chinese: "ÈÅ≤Âà∞"},
                    {word: "pain", pattern: "ai", phonetic: "pe…™n", chinese: "ÁñºÁóõ"},
                    {word: "say", pattern: "ay", phonetic: "se…™", chinese: "Ë™™"},
                    {word: "gate", pattern: "a_e", phonetic: "ge…™t", chinese: "ÈñÄ"},
                    {word: "wait", pattern: "ai", phonetic: "we…™t", chinese: "Á≠âÂæÖ"},
                    {word: "may", pattern: "ay", phonetic: "me…™", chinese: "ÂèØËÉΩ"},
                    {word: "safe", pattern: "a_e", phonetic: "se…™f", chinese: "ÂÆâÂÖ®"},
                    {word: "main", pattern: "ai", phonetic: "me…™n", chinese: "‰∏ªË¶Å"},
                    {word: "stay", pattern: "ay", phonetic: "ste…™", chinese: "ÂÅúÁïô"},
                    {word: "face", pattern: "a_e", phonetic: "fe…™s", chinese: "Ëáâ"},
                    {word: "tail", pattern: "ai", phonetic: "te…™l", chinese: "Â∞æÂ∑¥"}
                ]
            },
            {
                name: "e_e, ea, ee",
                patterns: ["e_e", "ea", "ee"],
                words: [
                    {word: "these", pattern: "e_e", phonetic: "√∞iÀêz", chinese: "ÈÄô‰∫õ"},
                    {word: "read", pattern: "ea", phonetic: "riÀêd", chinese: "Èñ±ËÆÄ"},
                    {word: "tree", pattern: "ee", phonetic: "triÀê", chinese: "Ê®π"},
                    {word: "scene", pattern: "e_e", phonetic: "siÀên", chinese: "Â†¥ÊôØ"},
                    {word: "meat", pattern: "ea", phonetic: "miÀêt", chinese: "ËÇâ"},
                    {word: "free", pattern: "ee", phonetic: "friÀê", chinese: "Ëá™Áî±"},
                    {word: "theme", pattern: "e_e", phonetic: "Œ∏iÀêm", chinese: "‰∏ªÈ°å"},
                    {word: "team", pattern: "ea", phonetic: "tiÀêm", chinese: "ÂúòÈöä"},
                    {word: "green", pattern: "ee", phonetic: "griÀên", chinese: "Á∂†Ëâ≤"},
                    {word: "complete", pattern: "e_e", phonetic: "k…ômÀàpliÀêt", chinese: "ÂÆåÊàê"},
                    {word: "sea", pattern: "ea", phonetic: "siÀê", chinese: "Êµ∑"},
                    {word: "see", pattern: "ee", phonetic: "siÀê", chinese: "ÁúãË¶ã"},
                    {word: "delete", pattern: "e_e", phonetic: "d…™ÀàliÀêt", chinese: "Âà™Èô§"},
                    {word: "beat", pattern: "ea", phonetic: "biÀêt", chinese: "ÊâìÊïó"},
                    {word: "bee", pattern: "ee", phonetic: "biÀê", chinese: "ËúúËúÇ"},
                    {word: "extreme", pattern: "e_e", phonetic: "…™kÀàstriÀêm", chinese: "Ê•µÁ´Ø"},
                    {word: "heat", pattern: "ea", phonetic: "hiÀêt", chinese: "ÁÜ±"},
                    {word: "three", pattern: "ee", phonetic: "Œ∏riÀê", chinese: "‰∏â"},
                    {word: "compete", pattern: "e_e", phonetic: "k…ômÀàpiÀêt", chinese: "Á´∂Áà≠"},
                    {word: "seat", pattern: "ea", phonetic: "siÀêt", chinese: "Â∫ß‰Ωç"}
                ]
            },
            {
                name: "i_e, ie, igh",
                patterns: ["i_e", "ie", "igh"],
                words: [
                    {word: "bike", pattern: "i_e", phonetic: "ba…™k", chinese: "ËÖ≥Ë∏èËªä"},
                    {word: "pie", pattern: "ie", phonetic: "pa…™", chinese: "Ê¥æ"},
                    {word: "light", pattern: "igh", phonetic: "la…™t", chinese: "ÂÖâ"},
                    {word: "time", pattern: "i_e", phonetic: "ta…™m", chinese: "ÊôÇÈñì"},
                    {word: "tie", pattern: "ie", phonetic: "ta…™", chinese: "È†òÂ∏∂"},
                    {word: "night", pattern: "igh", phonetic: "na…™t", chinese: "Â§úÊôö"},
                    {word: "nine", pattern: "i_e", phonetic: "na…™n", chinese: "‰πù"},
                    {word: "lie", pattern: "ie", phonetic: "la…™", chinese: "Ë™™Ë¨ä"},
                    {word: "right", pattern: "igh", phonetic: "ra…™t", chinese: "Âè≥ÈÇä"},
                    {word: "fine", pattern: "i_e", phonetic: "fa…™n", chinese: "Â•ΩÁöÑ"},
                    {word: "die", pattern: "ie", phonetic: "da…™", chinese: "Ê≠ª‰∫°"},
                    {word: "sight", pattern: "igh", phonetic: "sa…™t", chinese: "Ë¶ñÂäõ"},
                    {word: "line", pattern: "i_e", phonetic: "la…™n", chinese: "Á∑ö"},
                    {word: "cry", pattern: "ie", phonetic: "kra…™", chinese: "Âì≠Ê≥£"},
                    {word: "bright", pattern: "igh", phonetic: "bra…™t", chinese: "Êòé‰∫Æ"},
                    {word: "mine", pattern: "i_e", phonetic: "ma…™n", chinese: "ÊàëÁöÑ"},
                    {word: "fly", pattern: "ie", phonetic: "fla…™", chinese: "È£õ"},
                    {word: "fight", pattern: "igh", phonetic: "fa…™t", chinese: "Êà∞È¨•"},
                    {word: "side", pattern: "i_e", phonetic: "sa…™d", chinese: "ÈÇä"},
                    {word: "high", pattern: "igh", phonetic: "ha…™", chinese: "È´ò"}
                ]
            },
            {
                name: "o_e, oa, ow",
                patterns: ["o_e", "oa", "ow"],
                words: [
                    {word: "home", pattern: "o_e", phonetic: "ho äm", chinese: "ÂÆ∂"},
                    {word: "boat", pattern: "oa", phonetic: "bo ät", chinese: "Ëàπ"},
                    {word: "show", pattern: "ow", phonetic: " Éo ä", chinese: "Ë°®Êºî"},
                    {word: "note", pattern: "o_e", phonetic: "no ät", chinese: "Á≠ÜË®ò"},
                    {word: "coat", pattern: "oa", phonetic: "ko ät", chinese: "Â§ñÂ•ó"},
                    {word: "grow", pattern: "ow", phonetic: "gro ä", chinese: "ÊàêÈï∑"},
                    {word: "hope", pattern: "o_e", phonetic: "ho äp", chinese: "Â∏åÊúõ"},
                    {word: "road", pattern: "oa", phonetic: "ro äd", chinese: "ÈÅìË∑Ø"},
                    {word: "know", pattern: "ow", phonetic: "no ä", chinese: "Áü•ÈÅì"},
                    {word: "bone", pattern: "o_e", phonetic: "bo än", chinese: "È™®È†≠"},
                    {word: "soap", pattern: "oa", phonetic: "so äp", chinese: "ËÇ•ÁöÇ"},
                    {word: "slow", pattern: "ow", phonetic: "slo ä", chinese: "ÊÖ¢"},
                    {word: "phone", pattern: "o_e", phonetic: "fo än", chinese: "ÈõªË©±"},
                    {word: "goal", pattern: "oa", phonetic: "go äl", chinese: "ÁõÆÊ®ô"},
                    {word: "flow", pattern: "ow", phonetic: "flo ä", chinese: "ÊµÅÂãï"},
                    {word: "stone", pattern: "o_e", phonetic: "sto än", chinese: "Áü≥È†≠"},
                    {word: "load", pattern: "oa", phonetic: "lo äd", chinese: "Ë≤†Ëºâ"},
                    {word: "blow", pattern: "ow", phonetic: "blo ä", chinese: "Âêπ"},
                    {word: "close", pattern: "o_e", phonetic: "klo äs", chinese: "ÈóúÈñâ"},
                    {word: "toast", pattern: "oa", phonetic: "to äst", chinese: "ÂêêÂè∏"}
                ]
            },
            {
                name: "u_e, ue, ui",
                patterns: ["u_e", "ue", "ui"],
                words: [
                    {word: "cute", pattern: "u_e", phonetic: "kjuÀêt", chinese: "ÂèØÊÑõ"},
                    {word: "blue", pattern: "ue", phonetic: "bluÀê", chinese: "ËóçËâ≤"},
                    {word: "fruit", pattern: "ui", phonetic: "fruÀêt", chinese: "Ê∞¥Êûú"},
                    {word: "tube", pattern: "u_e", phonetic: "tuÀêb", chinese: "ÁÆ°Â≠ê"},
                    {word: "true", pattern: "ue", phonetic: "truÀê", chinese: "ÁúüÂØ¶"},
                    {word: "suit", pattern: "ui", phonetic: "suÀêt", chinese: "Ë•øË£ù"},
                    {word: "huge", pattern: "u_e", phonetic: "hjuÀêd í", chinese: "Â∑®Â§ß"},
                    {word: "glue", pattern: "ue", phonetic: "gluÀê", chinese: "ËÜ†Ê∞¥"},
                    {word: "juice", pattern: "ui", phonetic: "d íuÀês", chinese: "ÊûúÊ±Å"},
                    {word: "use", pattern: "u_e", phonetic: "juÀêz", chinese: "‰ΩøÁî®"},
                    {word: "due", pattern: "ue", phonetic: "duÀê", chinese: "Âà∞Êúü"},
                    {word: "cruise", pattern: "ui", phonetic: "kruÀêz", chinese: "Â∑°Ëà™"},
                    {word: "mute", pattern: "u_e", phonetic: "mjuÀêt", chinese: "ÈùúÈü≥"},
                    {word: "clue", pattern: "ue", phonetic: "kluÀê", chinese: "Á∑öÁ¥¢"},
                    {word: "bruise", pattern: "ui", phonetic: "bruÀêz", chinese: "ÁòÄÂÇ∑"},
                    {word: "pure", pattern: "u_e", phonetic: "pj är", chinese: "Á¥îÊ∑®"},
                    {word: "value", pattern: "ue", phonetic: "v√¶ljuÀê", chinese: "ÂÉπÂÄº"},
                    {word: "ruin", pattern: "ui", phonetic: "ruÀê…™n", chinese: "ÊØÄÂ£û"},
                    {word: "cure", pattern: "u_e", phonetic: "kj är", chinese: "Ê≤ªÁôí"},
                    {word: "rescue", pattern: "ue", phonetic: "reskjuÀê", chinese: "ÊïëÊè¥"}
                ]
            }
        ];

        let currentGroup = 0;
        let currentWord = null;
        let correctCount = 0;
        let totalCount = 0;
        let answered = false;
        let groupStats = {};
        let sessionStartTime = new Date();
        let usedWords = [];
        const MAX_QUESTIONS = 20;

        // DOM ÂÖÉÁ¥†
        const homePage = document.getElementById('homePage');
        const quizPage = document.getElementById('quizPage');
        const groupsGrid = document.getElementById('groupsGrid');
        const quizTitle = document.getElementById('quizTitle');
        const quizPatterns = document.getElementById('quizPatterns');
        const currentWordEl = document.getElementById('currentWord');
        const playBtn = document.getElementById('playBtn');
        const optionsEl = document.getElementById('options');
        const feedbackEl = document.getElementById('feedback');
        const nextBtn = document.getElementById('nextBtn');
        const correctEl = document.getElementById('correct');
        const accuracyEl = document.getElementById('accuracy');
        const progressEl = document.getElementById('progress');
        const backHomeBtn = document.getElementById('backHomeBtn');
        const restartBtn = document.getElementById('restartBtn');
        const homeRecordBtn = document.getElementById('homeRecordBtn');
        const homeClearBtn = document.getElementById('homeClearBtn');
        const recordModal = document.getElementById('recordModal');
        const closeModal = document.getElementById('closeModal');
        const recordContent = document.getElementById('recordContent');
        const clearModal = document.getElementById('clearModal');
        const confirmClear = document.getElementById('confirmClear');
        const cancelClear = document.getElementById('cancelClear');

        // ÂàùÂßãÂåñ
        function init() {
            createGroupCards();
            setupEventListeners();
        }

        function createGroupCards() {
            groupsGrid.innerHTML = '';
            phonicsGroups.forEach((group, index) => {
                const card = document.createElement('div');
                card.className = 'group-card';
                card.addEventListener('click', () => startQuiz(index));
                
                const stats = getGroupStats(index);
                const statsText = stats.total > 0 ? 
                    `Â∑≤Á∑¥Áøí ${stats.total} È°åÔºåÊ∫ñÁ¢∫Áéá ${stats.accuracy}%` : 
                    'Â∞öÊú™Á∑¥Áøí';
                
                card.innerHTML = `
                    <div class="group-title">Group ${index + 1}</div>
                    <div class="group-patterns">${group.name}</div>
                    <div class="group-examples">
                        ${group.patterns.map(pattern => {
                            const example = group.words.find(w => w.pattern === pattern);
                            return `<span class="example-word">${example.word}</span>`;
                        }).join('')}
                    </div>
                    <div class="group-stats">${statsText}</div>
                `;
                
                groupsGrid.appendChild(card);
            });
        }

        function getGroupStats(groupIndex) {
            const group = groupStats[groupIndex];
            if (!group || group.sessions.length === 0) {
                return { total: 0, correct: 0, accuracy: 0 };
            }
            
            const total = group.sessions.reduce((sum, s) => sum + s.total, 0);
            const correct = group.sessions.reduce((sum, s) => sum + s.correct, 0);
            const accuracy = total > 0 ? Math.round((correct / total) * 100) : 0;
            
            return { total, correct, accuracy };
        }

        function setupEventListeners() {
            playBtn.addEventListener('click', playSound);
            nextBtn.addEventListener('click', nextQuestion);
            backHomeBtn.addEventListener('click', goHome);
            restartBtn.addEventListener('click', restartQuiz);
            homeRecordBtn.addEventListener('click', showRecord);
            homeClearBtn.addEventListener('click', showClearConfirm);
            closeModal.addEventListener('click', hideRecord);
            recordModal.addEventListener('click', (e) => {
                if (e.target === recordModal) hideRecord();
            });
            confirmClear.addEventListener('click', clearAllRecords);
            cancelClear.addEventListener('click', hideClearConfirm);
            clearModal.addEventListener('click', (e) => {
                if (e.target === clearModal) hideClearConfirm();
            });

            // ÈçµÁõ§‰∫ã‰ª∂
            document.addEventListener('keydown', (e) => {
                if (e.code === 'Space' && !nextBtn.disabled && quizPage.classList.contains('active')) {
                    e.preventDefault();
                    nextQuestion();
                }
            });
        }

        function startQuiz(groupIndex) {
            // ÂÑ≤Â≠òÁï∂ÂâçÁµÑÂà•ÁöÑÁµ±Ë®àË≥áÊñô
            if (totalCount > 0) {
                saveGroupStats();
            }
            
            currentGroup = groupIndex;
            const group = phonicsGroups[groupIndex];
            
            // Êõ¥Êñ∞‰ΩúÁ≠îÈ†ÅÈù¢Ê®ôÈ°å
            quizTitle.textContent = `Group ${groupIndex + 1}`;
            quizPatterns.textContent = group.name;
            
            // ÈáçÁΩÆÁµ±Ë®àÂíåÂ∑≤Áî®ÂñÆÂ≠ó
            correctCount = 0;
            totalCount = 0;
            usedWords = [];
            sessionStartTime = new Date();
            updateScore();
            
            // ÂàáÊèõÂà∞‰ΩúÁ≠îÈ†ÅÈù¢
            showPage('quiz');
            nextQuestion();
        }

        function showPage(page) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            if (page === 'home') {
                homePage.classList.add('active');
                createGroupCards(); // Êõ¥Êñ∞Áµ±Ë®àË≥áÊñô
            } else if (page === 'quiz') {
                quizPage.classList.add('active');
            }
        }

        function goHome() {
            // ÂÑ≤Â≠òÁï∂ÂâçÁµÑÂà•ÁöÑÁµ±Ë®àË≥áÊñô
            if (totalCount > 0 && totalCount < MAX_QUESTIONS) {
                saveGroupStats();
            }
            
            // ÈáçÁΩÆÈ°ØÁ§∫ÂÖÉÁ¥†
            playBtn.style.display = 'block';
            optionsEl.style.display = 'grid';
            nextBtn.style.display = 'block';
            
            showPage('home');
        }

        function restartQuiz() {
            // ÂÑ≤Â≠òÁï∂ÂâçÁµÑÂà•ÁöÑÁµ±Ë®àË≥áÊñô
            if (totalCount > 0 && totalCount >= MAX_QUESTIONS) {
                // Â¶ÇÊûúÊòØÂÆåÊàêÊ∏¨È©óÂæåÈáçÊñ∞ÈñãÂßãÔºå‰∏çÈúÄË¶ÅÂÜçÊ¨°ÂÑ≤Â≠ò
            } else if (totalCount > 0) {
                saveGroupStats();
            }
            
            // ÈáçÁΩÆÁµ±Ë®àÂíåÂ∑≤Áî®ÂñÆÂ≠ó
            correctCount = 0;
            totalCount = 0;
            usedWords = [];
            sessionStartTime = new Date();
            updateScore();
            
            // ÈáçÁΩÆÈ°ØÁ§∫ÂÖÉÁ¥†
            playBtn.style.display = 'block';
            optionsEl.style.display = 'grid';
            nextBtn.style.display = 'block';
            
            nextQuestion();
        }

        function saveGroupStats() {
            if (!groupStats[currentGroup]) {
                groupStats[currentGroup] = {
                    groupName: phonicsGroups[currentGroup].name,
                    sessions: []
                };
            }
            
            if (totalCount > 0) {
                const accuracy = Math.round((correctCount / totalCount) * 100);
                const endTime = new Date();
                const duration = Math.round((endTime - sessionStartTime) / 1000);
                
                groupStats[currentGroup].sessions.push({
                    correct: correctCount,
                    total: totalCount,
                    accuracy: accuracy,
                    startTime: sessionStartTime,
                    endTime: endTime,
                    duration: duration
                });
            }
        }

        function getRandomWord() {
            const words = phonicsGroups[currentGroup].words;
            const availableWords = words.filter(word => !usedWords.includes(word.word));
            
            // Â¶ÇÊûúÊâÄÊúâÂñÆÂ≠óÈÉΩÁî®ÈÅé‰∫ÜÔºåÈáçÁΩÆÂ∑≤Áî®ÂñÆÂ≠óÂàóË°®
            if (availableWords.length === 0) {
                usedWords = [];
                return words[Math.floor(Math.random() * words.length)];
            }
            
            const selectedWord = availableWords[Math.floor(Math.random() * availableWords.length)];
            usedWords.push(selectedWord.word);
            return selectedWord;
        }

        function nextQuestion() {
            // Ê™¢Êü•ÊòØÂê¶Â∑≤ÈÅîÂà∞20È°å
            if (totalCount >= MAX_QUESTIONS) {
                showQuizComplete();
                return;
            }
            
            currentWord = getRandomWord();
            currentWordEl.textContent = currentWord.word;
            currentWordEl.classList.add('hidden');
            answered = false;
            nextBtn.disabled = true;
            feedbackEl.textContent = '';
            feedbackEl.className = 'feedback';
            
            createOptions();
        }

        function createOptions() {
            const patterns = phonicsGroups[currentGroup].patterns;
            optionsEl.innerHTML = '';
            
            patterns.forEach(pattern => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                
                const patternText = document.createElement('div');
                patternText.textContent = pattern;
                patternText.style.fontSize = '1.3rem';
                patternText.style.fontWeight = '600';
                
                const currentGroupWords = phonicsGroups[currentGroup].words;
                const exampleWord = currentGroupWords.find(word => word.pattern === pattern);
                const exampleText = document.createElement('div');
                exampleText.textContent = `ex: ${exampleWord.word}`;
                exampleText.style.fontSize = '0.9rem';
                exampleText.style.color = '#718096';
                exampleText.style.fontStyle = 'italic';
                exampleText.style.marginTop = '4px';
                
                const soundBtn = document.createElement('button');
                soundBtn.className = 'option-sound-btn';
                soundBtn.textContent = 'üîä ËÅΩÈü≥';
                soundBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    playPatternSound(pattern);
                });
                
                btn.appendChild(patternText);
                btn.appendChild(exampleText);
                btn.appendChild(soundBtn);
                btn.addEventListener('click', () => selectOption(pattern, btn));
                optionsEl.appendChild(btn);
            });
        }

        function selectOption(selectedPattern, btnElement) {
            if (answered) return;
            
            answered = true;
            totalCount++;
            
            const isCorrect = selectedPattern === currentWord.pattern;
            
            document.querySelectorAll('.option-btn').forEach(btn => {
                btn.classList.remove('correct', 'incorrect');
            });
            
            currentWordEl.classList.remove('hidden');
            currentWordEl.innerHTML = `${currentWord.word} <span style="font-size: 1.5rem; color: #718096; margin-left: 15px;">(${currentWord.chinese})</span>`;
            
            if (isCorrect) {
                correctCount++;
                btnElement.classList.add('correct');
                feedbackEl.textContent = 'üéâ Ê≠£Á¢∫ÔºÅÂæàÊ£íÔºÅ';
                feedbackEl.className = 'feedback correct';
            } else {
                btnElement.classList.add('incorrect');
                document.querySelectorAll('.option-btn').forEach(btn => {
                    if (btn.textContent === currentWord.pattern) {
                        btn.classList.add('correct');
                    }
                });
                feedbackEl.textContent = `‚ùå ‰∏çÂ∞çÂñîÔºÅÊ≠£Á¢∫Á≠îÊ°àÊòØ "${currentWord.pattern}"`;
                feedbackEl.className = 'feedback incorrect';
            }
            
            updateScore();
            nextBtn.disabled = false;
        }

        function updateScore() {
            correctEl.textContent = correctCount;
            progressEl.textContent = `${totalCount}/${MAX_QUESTIONS}`;
            const accuracy = totalCount > 0 ? Math.round((correctCount / totalCount) * 100) : 0;
            accuracyEl.textContent = accuracy + '%';
        }

        function showQuizComplete() {
            // Ëá™ÂãïÂÑ≤Â≠òÁµ±Ë®àË≥áÊñô
            saveGroupStats();
            
            const accuracy = Math.round((correctCount / totalCount) * 100);
            let message = '';
            let emoji = '';
            
            if (accuracy >= 90) {
                message = 'Â§™Ê£í‰∫ÜÔºÅ‰Ω†ÊòØÁôºÈü≥È´òÊâãÔºÅ';
                emoji = 'üèÜ';
            } else if (accuracy >= 80) {
                message = 'ÂæàÂ•ΩÔºÅÁπºÁ∫å‰øùÊåÅÔºÅ';
                emoji = 'üéâ';
            } else if (accuracy >= 70) {
                message = '‰∏çÈåØÔºÅÈÇÑÊúâÈÄ≤Ê≠•Á©∫ÈñìÔºÅ';
                emoji = 'üëç';
            } else {
                message = 'Âä†Ê≤πÔºÅÂ§öÁ∑¥ÁøíÊúÉÊõ¥Â•ΩÔºÅ';
                emoji = 'üí™';
            }
            
            currentWordEl.innerHTML = `
                <div style="font-size: 2rem; margin-bottom: 20px;">${emoji}</div>
                <div style="font-size: 1.5rem; color: #4a5568; margin-bottom: 10px;">Ê∏¨È©óÂÆåÊàêÔºÅ</div>
                <div style="font-size: 1.2rem; color: #718096;">${message}</div>
            `;
            currentWordEl.classList.remove('hidden');
            
            feedbackEl.innerHTML = `
                <div style="font-size: 1.1rem; color: #4a5568;">
                    ÊúÄÁµÇÊàêÁ∏æÔºö${correctCount}/${totalCount} È°åÊ≠£Á¢∫ (${accuracy}%)
                </div>
            `;
            feedbackEl.className = 'feedback';
            
            // Èö±ËóèÊí≠ÊîæÊåâÈàïÂíåÈÅ∏È†Ö
            playBtn.style.display = 'none';
            optionsEl.style.display = 'none';
            nextBtn.style.display = 'none';
            
            // Êõ¥Êñ∞È¶ñÈ†ÅÁöÑÁµ±Ë®àË≥áÊñô
            createGroupCards();
        }

        function playSound() {
            if (!currentWord) return;
            
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(currentWord.word);
                utterance.lang = 'en-US';
                utterance.rate = 0.8;
                utterance.pitch = 1;
                speechSynthesis.speak(utterance);
            } else {
                feedbackEl.textContent = 'Êä±Ê≠âÔºåÊÇ®ÁöÑÁÄèË¶ΩÂô®‰∏çÊîØÊè¥Ë™ûÈü≥Êí≠ÊîæÂäüËÉΩ';
                feedbackEl.className = 'feedback incorrect';
            }
        }
        
        function playPatternSound(pattern) {
            const currentGroupWords = phonicsGroups[currentGroup].words;
            const exampleWord = currentGroupWords.find(word => word.pattern === pattern);
            
            if (exampleWord && 'speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(exampleWord.word);
                utterance.lang = 'en-US';
                utterance.rate = 0.7;
                utterance.pitch = 1;
                speechSynthesis.speak(utterance);
            } else if (!('speechSynthesis' in window)) {
                feedbackEl.textContent = 'Êä±Ê≠âÔºåÊÇ®ÁöÑÁÄèË¶ΩÂô®‰∏çÊîØÊè¥Ë™ûÈü≥Êí≠ÊîæÂäüËÉΩ';
                feedbackEl.className = 'feedback incorrect';
            }
        }

        function showRecord() {
            // ÂÖàÂÑ≤Â≠òÁï∂ÂâçÁµÑÂà•ÁöÑË≥áÊñô
            if (totalCount > 0 && quizPage.classList.contains('active')) {
                saveGroupStats();
            }
            
            let html = '<div style="margin-bottom: 20px; padding: 15px; background: #f7fafc; border-radius: 10px;">';
            html += '<h3 style="margin: 0 0 10px 0; color: #4a5568;">üìà Á∏ΩÈ´îÁµ±Ë®à</h3>';
            
            let totalSessions = 0;
            let totalQuestions = 0;
            let totalCorrect = 0;
            
            Object.values(groupStats).forEach(group => {
                totalSessions += group.sessions.length;
                group.sessions.forEach(session => {
                    totalQuestions += session.total;
                    totalCorrect += session.correct;
                });
            });
            
            const overallAccuracy = totalQuestions > 0 ? Math.round((totalCorrect / totalQuestions) * 100) : 0;
            html += `<p style="margin: 5px 0;">Á∏ΩÁ∑¥ÁøíÊ¨°Êï∏: ${totalSessions} Ê¨°</p>`;
            html += `<p style="margin: 5px 0;">Á∏ΩÈ°åÊï∏: ${totalQuestions} È°å</p>`;
            html += `<p style="margin: 5px 0;">Á∏ΩÈ´îÊ∫ñÁ¢∫Áéá: ${overallAccuracy}%</p>`;
            html += '</div>';
            
            for (let groupIndex = 0; groupIndex < phonicsGroups.length; groupIndex++) {
                const group = groupStats[groupIndex];
                html += `<div style="margin-bottom: 20px; padding: 15px; border: 2px solid #e2e8f0; border-radius: 10px;">`;
                html += `<h3 style="margin: 0 0 15px 0; color: #4a5568;">Group ${groupIndex + 1}: ${phonicsGroups[groupIndex].name}</h3>`;
                
                if (!group || group.sessions.length === 0) {
                    html += '<p style="color: #718096; font-style: italic;">Â∞öÊú™Á∑¥ÁøíÊ≠§ÁµÑÂà•</p>';
                } else {
                    group.sessions.forEach((session, index) => {
                        const startTime = session.startTime.toLocaleString('zh-TW');
                        const minutes = Math.floor(session.duration / 60);
                        const seconds = session.duration % 60;
                        const durationText = minutes > 0 ? `${minutes}ÂàÜ${seconds}Áßí` : `${seconds}Áßí`;
                        
                        html += `<div style="margin-bottom: 10px; padding: 10px; background: ${session.accuracy >= 80 ? '#c6f6d5' : session.accuracy >= 60 ? '#fef5e7' : '#fed7d7'}; border-radius: 8px;">`;
                        html += `<div style="font-weight: 600;">Á¨¨ ${index + 1} Ê¨°Á∑¥Áøí</div>`;
                        html += `<div style="font-size: 0.9rem; color: #4a5568;">`;
                        html += `ÊôÇÈñì: ${startTime}<br>`;
                        html += `Á≠îÂ∞ç: ${session.correct}/${session.total} È°å (${session.accuracy}%)<br>`;
                        html += `Áî®ÊôÇ: ${durationText}`;
                        html += `</div></div>`;
                    });
                    
                    const groupTotal = group.sessions.reduce((sum, s) => sum + s.total, 0);
                    const groupCorrect = group.sessions.reduce((sum, s) => sum + s.correct, 0);
                    const groupAccuracy = groupTotal > 0 ? Math.round((groupCorrect / groupTotal) * 100) : 0;
                    
                    html += `<div style="margin-top: 10px; padding: 10px; background: #edf2f7; border-radius: 8px; font-weight: 600;">`;
                    html += `Êú¨ÁµÑÁ∏ΩË®à: ${group.sessions.length} Ê¨°Á∑¥ÁøíÔºå${groupCorrect}/${groupTotal} È°åÊ≠£Á¢∫ (${groupAccuracy}%)`;
                    html += `</div>`;
                }
                
                html += '</div>';
            }
            
            recordContent.innerHTML = html;
            recordModal.style.display = 'flex';
        }
        
        function hideRecord() {
            recordModal.style.display = 'none';
        }
        
        function showClearConfirm() {
            clearModal.style.display = 'flex';
        }
        
        function hideClearConfirm() {
            clearModal.style.display = 'none';
        }
        
        function clearAllRecords() {
            groupStats = {};
            
            if (quizPage.classList.contains('active')) {
                correctCount = 0;
                totalCount = 0;
                sessionStartTime = new Date();
                updateScore();
            }
            
            hideClearConfirm();
            
            if (homePage.classList.contains('active')) {
                createGroupCards();
            }
            
            feedbackEl.textContent = '‚úÖ ÊâÄÊúâÁ≠îÈ°åË®òÈåÑÂ∑≤Ê∏ÖÈô§ÔºÅ';
            feedbackEl.className = 'feedback correct';
            
            setTimeout(() => {
                feedbackEl.textContent = '';
                feedbackEl.className = 'feedback';
            }, 3000);
        }

        // ÂïüÂãïÊáâÁî®Á®ãÂºè
        init();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'992e4e71b613074c',t:'MTc2MTE5MTgwNi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
